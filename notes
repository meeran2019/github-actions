-----------------------------------------------------------------------------------------------------------
Introduction:
-----------------------------------------------------------------------------------------------------------

No need of separate CI CD tools like jenkins.
Github manages the underlying infrastructure.
Execute tasks in virtual environment.
Git Repo -> Actions tab
Can enable or disable workflow in github UI.

repo-root/.github/workflows/name.yaml   -> Workflows are created in this path. 

It consists of,
    workflow
    Jobs
    Steps 
    Runner - Github hosted and Selfhosted.

In CI-CD, it is of 
    commit -> pull request -> review -> CI steps -> approve -> Merge -> CD Steps -> Deploy 

In free account, get 2000 action minutes/month and 500mb of package storage.

-----------------------------------------------------------------------------------------------------------
GitHub Actions - Core Concepts:
-----------------------------------------------------------------------------------------------------------

There are 3 main components,
    name - Workflow
    jobs - List of jobs
    steps - list of steps under the job.

    Jobs and Steps are executed sequentially. 
    Can enable or disable workflow in github UI.

    name: Sample Workflow                   -> Workflow 
    on: [push]                              -> Trigger 
    jobs:               
      build:                                -> Job 
        name: Build
        runs-on: ubuntu-latest              -> Github hosted Runner 
        steps:                              -> Steps 
        - name: Checkout repository
          uses: actions/checkout@v2         -> actions are prebuilt for the specific tasks and used. 
        - name: Set up Node.js
          uses: actions/setup-node@v2
          with:
            node-version: '14'    
        - name: Install dependencies
          run: npm install    
        - name: Build project
          run: npm run build    
        - name: Run tests
          run: npm test
    

Create first workflow:

        1. Create the directory under root-repository/.github/worklows/example.yaml 
        It support both .yml or .yaml format.
        NOTE: Github hosted or Self hosted Runner is on separate machine and by default does not have access or download the source repo. It needs to checkout separately.

GitHub Actions:

        It is prebuild workflow which designed for the specific functionality.
        It is created by community or github or github partner.
        It can be found in below URL,
            https://github.com/marketplace?query=sort%3Apopularity-desc&type=actions&verification=verified_creator
        Choose verified creator which is validated by github.
        It can be defined based on version, branch, SHAs value.
        uses: actions/checkout@v2   or actions/checkout@main or actions/checkout@HETWKNASNUWYQUWQOQW

Configure Checkout Action:

        From github market place, select the checkout actions.
          https://github.com/marketplace/actions/checkout
        By default without any parameter, it downloads all the files under the repo.

Multi Line Commands and Executing 3rd Party Libraries:

        To execute multiple commands in single run require to use | (pipe symbol)
        Under .github/workflows, have multiple workflows, based on "on:push", all workflows will be executed whenver there is a commit.        
        Can enable or disable workflow in github UI.

Execute shell scripts in workflow:

        In same run command, can execute run the script as below,
          run: 
            shell-script.sh  

          run: | 
            chmod +x shell-script.sh
            shell-script.sh

Workflow with Multiple Jobs:

        Each job runs on it own virtual machine.
        Each job virtual machine can be different like mac, windows or linux.
        By default runs in PARALLEL.
        By default, output of one job is not available for another job.

        needs is used to set dependency for the jobs.

        jobs:
          job1:
          job2:
            needs: job1
          job3:
            needs: [job1, job2]

Storing workflow data as Artifacts:
        To pass data between jobs, it require to use the shared action.
            Upload a Build artifact
            Download a Build artifact.

        - uses: actions/upload-artifact@v4
          with:
            name: my-artifact
            path: path/to/artifact/world.txt

        - uses: actions/download-artifact@v4
          with:
            name: my-artifact
            path: your/destination/dir

